<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>CAT</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: linear-gradient(#fdf6e3, #f5efe6); /* ç±³ç™½ç™‚ç™’èƒŒæ™¯ */
      font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
    }

    #hint {
      position: fixed;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      background: transparent;
      padding: 0;
      border-radius: 0;
      font-size: 15px;
      color: #666;
      box-shadow: none;
    }

    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="game"></canvas>
  <div id="hint">é»æ“Šç•«é¢ï¼Œè£½é€ å…‰é»ï¼Œé»‘è²“æœƒæ…¢æ…¢è¿½éå» ğŸ–¤âœ¨</div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    // æ™‚é–“ï¼ˆå‹•ç•«ç”¨ï¼‰
    let time = 0;

    // å…‰é»
    const light = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      r: 8,
      active: false
    };

    // é»‘è²“
    const cat = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      speed: 0.05,
      boost: 1,
      facing: 1 // 1 å‘å³, -1 å‘å·¦
    };

    canvas.addEventListener("click", (e) => {
      light.x = e.clientX;
      light.y = e.clientY;
      light.active = true;
    });

    canvas.addEventListener("mousedown", () => {
      cat.boost = 2.5; // é•·æŒ‰åŠ é€Ÿ
    });

    canvas.addEventListener("mouseup", () => {
      cat.boost = 1;
    });

    function update() {
      if (!light.active) return;

      const dx = light.x - cat.x;
      const dy = light.y - cat.y;
      const dist = Math.hypot(dx, dy);

      // æ ¹æ“šå…‰é»æ–¹å‘æ±ºå®šé¢å‘
      if (Math.abs(dx) > 2) {
        cat.facing = dx > 0 ? 1 : -1;
      }

      // æ¥è¿‘å…‰é»æ™‚åœä¸‹ä¾†ã€Œçœ‹ã€
      if (dist < 30) {
        cat.boost = 0; // åœä¸‹ä¾†
        return;
      }

      if (dist > 1) {
        cat.x += dx * cat.speed * cat.boost;
        cat.y += dy * cat.speed * cat.boost;
      }
    }

      if (dist > 1) {
        cat.x += dx * cat.speed * cat.boost;
        cat.y += dy * cat.speed * cat.boost;
      }
    }
    }

    function drawLight() {
      if (!light.active) return;

      const pulse = Math.sin(time * 2) * 2;
      ctx.beginPath();
      ctx.arc(light.x, light.y, light.r + pulse, 0, Math.PI * 2);
      ctx.fillStyle = "rgba(255,180,120,0.9)"; // æº«æš–æ©˜è‰²ï¼Œèˆ‡ç±³ç™½å°æ¯”
      ctx.fill();
    }

    function drawCat() {
      ctx.save();
      ctx.translate(cat.x, cat.y);
      ctx.scale(cat.facing, 1); // æ ¹æ“šæ–¹å‘ç¿»è½‰

      const bodyColor = "#222";
      const eyeColor = "#ffd966";

      // èº«é«”ï¼ˆç”¨ç¸®æ”¾åœ“å½¢ç•«æ©¢åœ“ï¼Œé¿å… ellipse ç›¸å®¹æ€§å•é¡Œï¼‰
      ctx.fillStyle = bodyColor;
      ctx.save();
      ctx.translate(0, 12);
      ctx.scale(2.5, 1);
      ctx.beginPath();
      ctx.arc(0, 0, 22, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();

      // é ­ï¼ˆå´é¢ï¼‰
      ctx.beginPath();
      ctx.arc(45, 0, 22, 0, Math.PI * 2);
      ctx.fill();

      // è€³æœµ
      ctx.beginPath();
      ctx.moveTo(52, -22);
      ctx.lineTo(60, -38);
      ctx.lineTo(42, -24);
      ctx.closePath();
      ctx.fill();

      // çœ¼ç›ï¼ˆå´é¢ä¸€éš»ï¼‰
      ctx.fillStyle = eyeColor;
      ctx.beginPath();
      ctx.arc(52, -2, 3.5, 0, Math.PI * 2);
      ctx.fill();

      // è…¿ï¼ˆç·©æ…¢è¸æ­¥ï¼‰
      const step = Math.sin(time * 1.5) * 4;
      ctx.strokeStyle = bodyColor;
      ctx.lineWidth = 5;
      ctx.lineCap = "round";

      // å‰è…³
      ctx.beginPath();
      ctx.moveTo(30, 26);
      ctx.lineTo(30, 34 + step);
      ctx.stroke();

      // å¾Œè…³
      ctx.beginPath();
      ctx.moveTo(-10, 26);
      ctx.lineTo(-10, 34 - step);
      ctx.stroke();

      // å°¾å·´ï¼ˆæœƒæ™ƒå‹•ï¼‰
      const wag = Math.sin(time) * 12;
      ctx.beginPath();
      ctx.moveTo(-55, 12);
      ctx.quadraticCurveTo(-85, wag, -65, -18 + wag);
      ctx.stroke();

      ctx.restore();
    }

    function loop() {
      time += 0.05;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      update();
      drawLight();
      drawCat();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
